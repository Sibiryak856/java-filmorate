CREATE TABLE IF NOT EXISTS PUBLIC.USERS (
	USER_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	EMAIL CHARACTER VARYING(255) NOT NULL,
	LOGIN CHARACTER VARYING(255) NOT NULL,
	USER_NAME CHARACTER VARYING(255),
	BIRTHDAY DATE
);

CREATE TABLE IF NOT EXISTS PUBLIC.USER_FRIENDS (
	USER_ID INTEGER NOT NULL,
	FRIEND_ID INTEGER NOT NULL,
	FRIEND_STATUS varchar NOT NULL,
	CONSTRAINT USER_FRIENDS_USER_ID_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS
);

CREATE TABLE IF NOT EXISTS PUBLIC.GENRES (
	GENRE_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	GENRE_NAME CHARACTER VARYING(14) NOT NULL UNIQUE 
);

CREATE TABLE IF NOT EXISTS PUBLIC.MPA (
	MPA_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	MPA_NAME CHARACTER VARYING(5) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS PUBLIC.FILMS (
	FILM_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	FILM_NAME CHARACTER VARYING(255) NOT NULL,
	DESCRIPTION CHARACTER VARYING(200),
	RELEASE_DATE DATE,
	DURATION INTEGER,
	MPA_ID INTEGER NOT NULL,
	CONSTRAINT FILMS_MPA_ID_FK FOREIGN KEY (MPA_ID) REFERENCES PUBLIC.MPA
);

CREATE TABLE IF NOT EXISTS PUBLIC.FILM_GENRES (
	FILM_ID INTEGER NOT NULL,
	GENRE_ID INTEGER NOT NULL,
	CONSTRAINT FILM_GENRES_GENRE_ID_FK_1 FOREIGN KEY (GENRE_ID) REFERENCES PUBLIC.GENRES,
	CONSTRAINT FILM_GENRES_FILM_ID_FK_2 FOREIGN KEY (FILM_ID) REFERENCES PUBLIC.FILMS
);

CREATE TABLE IF NOT EXISTS PUBLIC.FILM_LIKES (
	FILM_ID INTEGER NOT NULL,
	USER_ID INTEGER NOT NULL,
	CONSTRAINT FILM_LIKES_FILM_ID_FK_1 FOREIGN KEY (FILM_ID) REFERENCES PUBLIC.FILMS,
	CONSTRAINT FILM_LIKES_USER_ID_FK_2 FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS
);